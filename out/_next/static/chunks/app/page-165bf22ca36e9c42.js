(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{50490:function(t,e,n){Promise.resolve().then(n.bind(n,63356))},62478:function(t,e,n){"use strict";n.d(e,{Hj:function(){return f},sl:function(){return d},jn:function(){return m},s1:function(){return u},AU:function(){return i},Ro:function(){return o},RK:function(){return s},eb:function(){return l},Oy:function(){return v},wt:function(){return x},xS:function(){return p},pm:function(){return c},n3:function(){return h}});var r=n(56690);let a=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{headers:n={},method:a="GET",data:o}=e,s="http://192.168.1.2:9999".concat(t);if("GET"===a){let t=new URLSearchParams((0,r.$B)(o));s+="?".concat(t)}else"POST"===a&&(e.body=JSON.stringify(o),n["Content-Type"]="application/json");delete e.data,e.headers=n;let i=await fetch(s,e);return i},o=async t=>{let{address:e,offset:n,size:r,type:o,ticker:s}=t,i=await a("/ordx/GetAddressOrdxAssets",{data:{address:e,offset:n,size:r,type:o,ticker:s}});return i.json()},s=async t=>{let{ticker:e}=t,n=await a("/ordx/GetTickerSummary",{data:{ticker:e}});return n.json()},i=async t=>{let{ticker:e,offset:n,size:r,sort:o=0,type:s=1,address:i}=t,u=await a("/ordx/GetOrders",{data:{ticker:e,offset:n,size:r,sort:o,type:s,address:i}});return u.json()},u=async t=>{let{ticker:e,offset:n,size:r,sort:o=0,address:s}=t,i=await a("/ordx/GetHistory",{data:{ticker:e,offset:n,size:r,sort:o,address:s}});return i.json()},l=async t=>{let{interval:e=1,top_count:n=10,top_list:r="tx_amount"}=t,o=await a("/ordx/GetTopTickers",{data:{interval:e,top_count:n,top_list:r}});return o.json()},c=async t=>{let{address:e,raw:n}=t,r=await a("/ordx/SubmitOrder",{method:"POST",data:{address:e,raw:n}});return r.json()},d=async t=>{let{address:e,order_id:n}=t,r=await a("/ordx/CancelOrder",{method:"POST",data:{address:e,order_id:n}});return r.json()},p=async t=>{let{address:e,order_id:n}=t,r=await a("/ordx/LockOrder",{method:"POST",data:{address:e,order_id:n}});return r.json()},h=async t=>{let{address:e,order_id:n}=t,r=await a("/ordx/UnlockOrder",{method:"POST",data:{address:e,order_id:n}});return r.json()},f=async t=>{let{address:e,order_id:n,raw:r}=t,o=await a("/ordx/BuyOrder",{method:"POST",data:{address:e,order_id:n,raw:r}});return o.json()},x=async t=>{let{address:e,value:n=600,network:r}=t,a=await fetch("https://apitest.ordx.space/testnet/utxo/getUtxoByValue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e,value:n})});return a.json()},m=async t=>{let e=await fetch("testnet"===t?"https://mempool.space/testnet/api/v1/fees/recommended":"https://mempool.space/api/v1/fees/recommended"),n=await e.json();return n},v=async(t,e)=>{let n="https://mempool.space".concat("testnet"===e?"/testnet":"","/api/tx/").concat(t,"/hex"),r=await fetch(n).then(t=>t.text()).then(t=>{if("Transaction not found"===t)throw Error("Some error happened when finding BTC to pay. Please try again later.");return t});return r}},63356:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return m}});var r=n(57437),a=n(62478),o=n(42853),s=n(19970),i=n(64903),u=n(53115),l=n(2014),c=n(45696),d=n(51240),p=n(1525),h=n(52037),f=n(2265),x=n(24033);function m(){let t=(0,x.useRouter)(),{data:e,error:n,isLoading:m}=(0,o.ZP)("/ordx/getTopTickers",()=>(0,a.eb)({})),v=(0,f.useMemo)(()=>(null==e?void 0:e.data)||[],[e]);return(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsxs)(s.b,{isHeaderSticky:!0,isStriped:!0,onRowAction:e=>{t.push("/ordx/ticker?ticker=".concat(e))},"aria-label":"Example table with infinite pagination",children:[(0,r.jsxs)(i.J,{children:[(0,r.jsx)(u.j,{children:"Ticker"},"ticker"),(0,r.jsx)(u.j,{children:"Volumn"},"total_amount"),(0,r.jsx)(u.j,{children:"Price"},"lowest_price"),(0,r.jsx)(u.j,{children:"Num of sales"},"onsell_order_count"),(0,r.jsx)(u.j,{children:"Holders"},"holder_count")]}),(0,r.jsx)(l.y,{isLoading:m,items:v,emptyContent:"No Data.",loadingContent:(0,r.jsx)(c.c,{}),children:t=>(0,r.jsx)(d.g,{className:"cursor-pointer",children:e=>(0,r.jsx)(p.X,{children:(0,h.sF)(t,e)})},t.ticker)})]})})}},56690:function(t,e,n){"use strict";n.d(e,{g:function(){return g},Us:function(){return d},eB:function(){return c},zU:function(){return j},NH:function(){return S},u4:function(){return w},$B:function(){return O},a:function(){return _},Ay:function(){return y}});var r=n(99301),a=n(81254),o=n(24128),s=n(33261),i=n(62478),u=n(40263).Buffer;let l=t=>{var e;let n=null===(e=o.Xf.fmt.toAsm(o.kL.toScriptPubKey(t)))||void 0===e?void 0:e[0];return n},c=async t=>{let{inscriptionUtxo:e,total:n,amount:o,network:s,address:u}=t,l=await (0,i.Oy)(e.txid,s),c=r.YW.fromHex(l);console.log(c);let d={hash:e.txid,index:e.vout,witnessUtxo:c.outs[e.vout],sighashType:131};console.log(d);let p=new r._B({network:"testnet"===s?r.QW.testnet:r.QW.bitcoin});r.Wi(a),console.log(u,n),p.addInput(d),p.addOutput({address:u,value:n});let h=await window.unisat.signPsbt(p.toHex());return h},d=async t=>{var e;let{orderId:n,feeRate:o,network:c,address:d,fee:p,utxos:h,serviceFee:f,dummyUtxos:x}=t;(0,s.env)("NEXT_PUBLIC_SERVICE_FEE");let m=(0,s.env)("NEXT_PUBLIC_IS_FREE"),v=(0,s.env)("NEXT_PUBLIC_SERVICE_ADDRESS");await (0,i.n3)({address:d,order_id:n});let w=await (0,i.xS)({address:d,order_id:n});if(!(null==w?void 0:null===(e=w.data)||void 0===e?void 0:e.raw))throw Error(w.msg);let{raw:y}=w.data;r.Wi(a);let g="testnet"===c?r.QW.testnet:r.QW.bitcoin,j=r._B.fromHex(y,{network:g}),S=new r._B({network:g});console.log(j);let O=h.reduce((t,e)=>t+e.value,0),_=h.map(t=>({hash:t.txid,index:t.vout,witnessUtxo:{script:u.from(l(d),"hex"),value:t.value}})),T=x.reduce((t,e)=>t+e.value,0),E=x.map(t=>({hash:t.txid,index:t.vout,witnessUtxo:{script:u.from(l(d),"hex"),value:t.value},sighashType:r.YW.SIGHASH_ALL}));E.forEach(t=>{S.addInput(t)}),S.addOutput({address:d,value:T}),console.log(_);let b={hash:j.txInputs[0].hash,index:j.txInputs[0].index,witnessUtxo:j.data.inputs[0].witnessUtxo,finalScriptWitness:j.data.inputs[0].finalScriptWitness};console.log(b),S.addInput(b),_.forEach(t=>{S.addInput(t)});let k=j.data.inputs[0].witnessUtxo.value;S.addOutput({address:d,value:k});let P=j.txOutputs[0].value,U=j.txOutputs[0];S.addOutput(U);let N=O-(P+p)-1200;"0"===m&&f&&v&&(N-=f,S.addOutput({address:v,value:f})),S.addOutput({address:d,value:600}),S.addOutput({address:d,value:600});let I={address:d,value:N};S.addOutput(I);let B=await window.unisat.signPsbt(S.toHex()),C=r._B.fromHex(B,{network:g}),H=C.extractTransaction(),W=H.toHex();return W};var p=n(51864),h=n.n(p),f=n(90555),x=n.n(f),m=n(34098),v=n.n(m);let w=t=>{let[e,n]=t.split(":");return{txid:e,vout:parseInt(n)}},y=t=>{t>=1e8&&(t*=10);let e=String(t).padStart(8,"0").slice(0,-9)+"."+String(t).padStart(8,"0").slice(-9);return"."==e.substring(0,1)&&(e="0"+e),e},g=t=>{let[e,n]=t.toString().split(".");return n||(n="0"),1e8*parseInt(e)+parseInt(n.padEnd(8,"0"))},j=function(t,e){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=h()(t,"value"),a=v()(r);n&&x()(a);let o=[],s=0;for(let t=0;t<a.length;t++){let n=a[t];if(o.push(n),(s+=n.value)>=e)break}return{minUtxo:r[0],maxUtxo:r[r.length-1],utxos:o,smallTwoUtxos:r.slice(0,2),total:s}},S=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*****";return"string"==typeof t&&t?"".concat(null==t?void 0:t.substring(0,e)).concat(n).concat(null==t?void 0:t.substring((null==t?void 0:t.length)-e)):""},O=t=>{let e={...t};return Object.keys(e).forEach(t=>{(""===e[t]||void 0===e[t]||null===e[t]||"null"===e[t]||"undefined"===e[t]||"NaN"===e[t]||isNaN(e[t])&&"number"==typeof e[t])&&delete e[t]}),e},_=(t,e)=>"testnet"===e?"https://mempool.space/testnet/tx/".concat(t):"https://mempool.space/tx/".concat(t)}},function(t){t.O(0,[121,645,578,700,515,971,472,744],function(){return t(t.s=50490)}),_N_E=t.O()}]);