(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{50490:function(t,e,n){Promise.resolve().then(n.bind(n,63356))},62478:function(t,e,n){"use strict";n.d(e,{Hj:function(){return m},sl:function(){return f},jn:function(){return w},Sf:function(){return y},s1:function(){return l},AU:function(){return c},Ro:function(){return s},RK:function(){return u},eb:function(){return d},Oy:function(){return g},wt:function(){return v},xS:function(){return h},pm:function(){return p},n3:function(){return x}});var r=n(56690),a=n(87714),o=n(89860);let i=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{publicKey:n,connected:i}=o.$.getState(),{signature:s}=a.E.getState(),{headers:u={},method:c="GET",data:l}=e,d="https://apitest.ordx.market".concat(t);if("GET"===c){let t=new URLSearchParams((0,r.$B)(l));d+="?".concat(t)}else"POST"===c&&(e.body=JSON.stringify(l),u["Content-Type"]="application/json");i&&s&&(u.Publickey=n,u.Signature=s),delete e.data,e.headers=u;let p=await fetch(d,e);return p},s=async t=>{let{address:e,offset:n,size:r,type:a,ticker:o}=t,s=await i("/ordx/GetAddressOrdxAssets",{data:{address:e,offset:n,size:r,type:a,ticker:o}});return s.json()},u=async t=>{let{ticker:e}=t,n=await i("/ordx/GetTickerSummary",{data:{ticker:e}});return n.json()},c=async t=>{let{ticker:e,offset:n,size:r,sort:a=0,type:o=1,address:s}=t,u=await i("/ordx/GetOrders",{data:{ticker:e,offset:n,size:r,sort:a,type:o,address:s}});return u.json()},l=async t=>{let{ticker:e,offset:n,size:r,sort:a=0,address:o}=t,s=await i("/ordx/GetHistory",{data:{ticker:e,offset:n,size:r,sort:a,address:o}});return s.json()},d=async t=>{let{interval:e=1,top_count:n=10,top_list:r="tx_amount"}=t,a=await i("/ordx/GetTopTickers",{data:{interval:e,top_count:n,top_list:r}});return a.json()},p=async t=>{let{address:e,raw:n}=t,r=await i("/ordx/SubmitOrder",{method:"POST",data:{address:e,raw:n}});return r.json()},f=async t=>{let{address:e,order_id:n}=t,r=await i("/ordx/CancelOrder",{method:"POST",data:{address:e,order_id:n}});return r.json()},h=async t=>{let{address:e,order_id:n}=t,r=await i("/ordx/LockOrder",{method:"POST",data:{address:e,order_id:n}});return r.json()},x=async t=>{let{address:e,order_id:n}=t,r=await i("/ordx/UnlockOrder",{method:"POST",data:{address:e,order_id:n}});return r.json()},m=async t=>{let{address:e,order_id:n,raw:r}=t,a=await i("/ordx/BuyOrder",{method:"POST",data:{address:e,order_id:n,raw:r}});return a.json()},v=async t=>{let{address:e,value:n=600,network:r}=t,a=await fetch("https://apitest.ordx.space/testnet/utxo/getUtxoByValue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e,value:n})});return a.json()},w=async t=>{let e=await fetch("testnet"===t?"https://mempool.space/testnet/api/v1/fees/recommended":"https://mempool.space/api/v1/fees/recommended"),n=await e.json();return n},y=async()=>{let t=await fetch("/version.txt");return console.log("appVersion",await t.text()),t.text()},g=async(t,e)=>{let n="https://mempool.space".concat("testnet"===e?"/testnet":"","/api/tx/").concat(t,"/hex"),r=await fetch(n).then(t=>t.text()).then(t=>{if("Transaction not found"===t)throw Error("Some error happened when finding BTC to pay. Please try again later.");return t});return r}},63356:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return m}});var r=n(57437),a=n(62478),o=n(42853),i=n(84082),s=n(64903),u=n(53115),c=n(2014),l=n(78507),d=n(51240),p=n(1525),f=n(52037),h=n(2265),x=n(24033);function m(){let t=(0,x.useRouter)(),{data:e,error:n,isLoading:m}=(0,o.ZP)("/ordx/getTopTickers",()=>(0,a.eb)({})),v=(0,h.useMemo)(()=>(null==e?void 0:e.data)||[],[e]);return(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsxs)(i.b,{isHeaderSticky:!0,onRowAction:e=>{t.push("/ordx/ticker?ticker=".concat(e))},"aria-label":"Example table with infinite pagination",children:[(0,r.jsxs)(s.J,{children:[(0,r.jsx)(u.j,{children:"Ticker"},"ticker"),(0,r.jsx)(u.j,{children:"Volumn"},"tx_total_volume"),(0,r.jsx)(u.j,{children:"Price"},"lowest_price"),(0,r.jsx)(u.j,{children:"成交笔数"},"tx_order_count"),(0,r.jsx)(u.j,{children:"Holders"},"holder_count")]}),(0,r.jsx)(c.y,{isLoading:m,items:v,emptyContent:"No Data.",loadingContent:(0,r.jsx)(l.c,{}),children:t=>(0,r.jsx)(d.g,{className:"cursor-pointer",children:e=>"holder_count"===e?(0,r.jsx)(p.X,{className:"text-center",children:(0,r.jsx)("div",{children:(0,f.sF)(t,e)})}):["tx_total_volume","lowest_price"].includes(e.toString())?(console.log("item",e),(0,r.jsxs)(p.X,{children:[(0,f.sF)(t,e)," BTC"]})):(0,r.jsx)(p.X,{children:(0,f.sF)(t,e)})},t.ticker)})]})})}},56690:function(t,e,n){"use strict";n.d(e,{g:function(){return g},Us:function(){return d},eB:function(){return l},zU:function(){return j},NH:function(){return O},u4:function(){return w},$B:function(){return S},a:function(){return b},Ay:function(){return y}});var r=n(99301),a=n(81254),o=n(24128),i=n(89860),s=n(62478),u=n(40263).Buffer;let c=t=>{var e;let n=null===(e=o.Xf.fmt.toAsm(o.kL.toScriptPubKey(t)))||void 0===e?void 0:e[0];return n},l=async t=>{let{inscriptionUtxo:e,total:n,network:o,address:u}=t,{btcWallet:c}=i.$.getState(),l=await (0,s.Oy)(e.txid,o),d=r.YW.fromHex(l),p={hash:e.txid,index:e.vout,witnessUtxo:d.outs[e.vout],sighashType:131},f=new r._B({network:"testnet"===o?r.QW.testnet:r.QW.bitcoin});if(r.Wi(a),f.addInput(p),f.addOutput({address:u,value:n}),!c)throw Error("Wallet not initialized");let h=await c.signPsbt(f.toHex());return h},d=async t=>{let{orderRaw:e,network:n,address:o,fee:s,utxos:l,serviceFee:d,dummyUtxos:p}=t,f="tb1pttjr9292tea2nr28ca9zswgdhz0dasnz6n3v58mtg9cyf9wqr49sv8zjep",{btcWallet:h}=i.$.getState();r.Wi(a);let x="testnet"===n?r.QW.testnet:r.QW.bitcoin,m=r._B.fromHex(e,{network:x}),v=new r._B({network:x});console.log(m);let w=l.reduce((t,e)=>t+e.value,0),y=l.map(t=>({hash:t.txid,index:t.vout,witnessUtxo:{script:u.from(c(o),"hex"),value:t.value}})),g=p.reduce((t,e)=>t+e.value,0),j=p.map(t=>({hash:t.txid,index:t.vout,witnessUtxo:{script:u.from(c(o),"hex"),value:t.value},sighashType:r.YW.SIGHASH_ALL}));j.forEach(t=>{v.addInput(t)}),v.addOutput({address:o,value:g}),console.log(y);let O={hash:m.txInputs[0].hash,index:m.txInputs[0].index,witnessUtxo:m.data.inputs[0].witnessUtxo,finalScriptWitness:m.data.inputs[0].finalScriptWitness};v.addInput(O),y.forEach(t=>{v.addInput(t)});let S=m.data.inputs[0].witnessUtxo.value;v.addOutput({address:o,value:S});let b=m.txOutputs[0].value,k=m.txOutputs[0];v.addOutput(k);let T=w-(b+s)-1200;d&&f&&(T-=d,v.addOutput({address:f,value:d})),v.addOutput({address:o,value:600}),v.addOutput({address:o,value:600});let _={address:o,value:T};if(v.addOutput(_),!h)throw Error("Wallet not initialized");let E=await h.signPsbt(v.toHex()),P=r._B.fromHex(E,{network:x}),U=P.extractTransaction(),N=U.toHex();return N};var p=n(51864),f=n.n(p),h=n(90555),x=n.n(h),m=n(34098),v=n.n(m);let w=t=>{let[e,n]=t.split(":");return{txid:e,vout:parseInt(n)}},y=t=>{t>=1e8&&(t*=10);let e=String(t).padStart(8,"0").slice(0,-9)+"."+String(t).padStart(8,"0").slice(-9);return"."==e.substring(0,1)&&(e="0"+e),e},g=t=>{let[e,n]=t.toString().split(".");return n||(n="0"),1e8*parseInt(e)+parseInt(n.padEnd(8,"0"))},j=function(t,e){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=f()(t,"value"),a=v()(r);n&&x()(a);let o=[],i=0;for(let t=0;t<a.length;t++){let n=a[t];if(o.push(n),(i+=n.value)>=e)break}let s=r.slice(0,2),u=[];for(let t=0;t<s.length;t++)o.some(e=>e.txid===s[t].txid)||u.push(s[t]);return{minUtxo:r[0],maxUtxo:r[r.length-1],utxos:o,smallTwoUtxos:u,total:i}},O=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*****";return"string"==typeof t&&t?"".concat(null==t?void 0:t.substring(0,e)).concat(n).concat(null==t?void 0:t.substring((null==t?void 0:t.length)-e)):""},S=t=>{let e={...t};return Object.keys(e).forEach(t=>{(""===e[t]||void 0===e[t]||null===e[t]||"null"===e[t]||"undefined"===e[t]||"NaN"===e[t]||isNaN(e[t])&&"number"==typeof e[t])&&delete e[t]}),e},b=(t,e)=>"testnet"===e?"https://mempool.space/testnet/tx/".concat(t):"https://mempool.space/tx/".concat(t)},87714:function(t,e,n){"use strict";n.d(e,{E:function(){return i},J:function(){return o}});var r=n(94660),a=n(74810);let o=(0,r.Ue)()((0,a.mW)(t=>({list:[],add:e=>{t(t=>({list:[...t.list,e]}))},reset:()=>{t({list:[]})}}))),i=(0,r.Ue)()((0,a.mW)((0,a.tJ)(t=>({feeRate:{value:1,type:"custom"},appVersion:0,signature:"",setSignature:e=>{t({signature:e})},setFeeRate:e=>{t({feeRate:e})},reset:()=>{t({feeRate:{value:1,type:"custom"},appVersion:0})}}),{name:"common-store",partialize:t=>Object.fromEntries(Object.entries(t).filter(t=>{let[e]=t;return["signature"].includes(e)}))})))},52037:function(t,e,n){"use strict";n.d(e,{sF:function(){return a}});var r=n(48794),a=(t,e)=>(0,r.Kn)(t)?t instanceof Array?[...t]:t[e]:t}},function(t){t.O(0,[121,645,551,920,328,853,971,472,744],function(){return t(t.s=50490)}),_N_E=t.O()}]);