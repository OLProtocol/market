(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{99502:function(e,l,t){Promise.resolve().then(t.bind(t,96657))},96657:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return k}});var s=t(57437),n=t(48745),a=t(46802),r=t(42853),i=t(48749),d=t(13479),c=t(62478),o=t(68638),u=t(2265),x=t(31197),h=t(28034),v=t(42891),m=t(21507),j=t(89571),f=t(12765),g=t(19505);let y=e=>{var l;let{item:t,onSell:n,onCancelOrder:a}=e,[r,i]=(0,u.useState)(!1),d=async()=>{i(!0),await n(t),i(!1)};return(0,s.jsxs)(v.w,{radius:"lg",className:"border-none w-full  h-[14rem] md:h-[20rem]",children:[(0,s.jsx)(m.G,{children:(0,s.jsx)("div",{className:"flex-1 text-sm md:text-base",children:null==t?void 0:null===(l=t.tickers)||void 0===l?void 0:l.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:["Ticker: ",e.ticker]}),(0,s.jsxs)("div",{children:["Amount: ",e.amount]})]},e.inscriptionnum))})}),(0,s.jsx)(j.j,{}),(0,s.jsx)(f.i,{className:"",children:(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("div",{children:0===t.order_id?(0,s.jsx)(g.A,{className:"text-tiny ",variant:"flat",fullWidth:!0,color:"default",radius:"lg",onClick:d,children:"上架"}):(0,s.jsxs)(g.A,{className:"text-tiny",fullWidth:!0,variant:"flat",color:"default",radius:"lg",onClick:a,children:["下架（",t.price," ",t.currency,"）"]})})})})]})};var b=t(24033);let p=()=>{let e=(0,b.useRouter)(),{address:l}=(0,o.sD)(e=>e),{add:t,reset:n}=(0,o.JU)(e=>e),[a,v]=(0,u.useState)(1),[m,j]=(0,u.useState)(10),f=(0,u.useMemo)(()=>"/ordx/GetAddressOrdxAssets-".concat(l,"-").concat(a,"-").concat(m),[l,a,m]),{data:g,isLoading:p,mutate:N}=(0,r.ZP)(f,()=>(0,c.Ro)({address:l,offset:(a-1)*m,size:m}),{revalidateOnMount:!0}),k=async l=>{t(l),e.push("/account/sell")},C=async e=>{let t=await (0,c.sl)({address:l,order_id:e.order_id});200===t.code?(i.ZP.success({message:"Cancel order successfully",description:"The order has been canceled successfully"}),N(f)):i.ZP.error({message:"Cancel order failed",description:t.msg})},S=(0,u.useMemo)(()=>{var e,l;return(null==g?void 0:null===(e=g.data)||void 0===e?void 0:e.total)?Math.ceil((null==g?void 0:null===(l=g.data)||void 0===l?void 0:l.total)/10):0},[g]),w=(0,u.useMemo)(()=>{var e;return(null==g?void 0:null===(e=g.data)||void 0===e?void 0:e.assets)||[]},[g]);return(0,u.useEffect)(()=>{n()},[]),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)(h.V,{loading:p,children:[!w.length&&(0,s.jsx)(d.Z,{className:"mt-10"}),(0,s.jsx)("div",{className:"min-h-[30rem] grid  grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:w.map(e=>(0,s.jsx)(y,{item:e,onSell:()=>k(e),onCancelOrder:()=>C(e)},e.utxo))})]}),S>1&&(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(x.t,{total:S,offset:a,size:m,onChange:(e,l)=>{v(e)}})})]})};var N=t(41298);function k(){let{address:e}=(0,o.sD)(e=>e);return(0,s.jsx)("div",{children:(0,s.jsxs)(n.n,{"aria-label":"Options",children:[(0,s.jsx)(a.r,{title:"我的资产",children:(0,s.jsx)(p,{})},"utxo"),(0,s.jsx)(a.r,{title:"交易历史",children:(0,s.jsx)(N.K,{address:e})},"history")]})})}},28034:function(e,l,t){"use strict";t.d(l,{V:function(){return a}});var s=t(57437),n=t(45696);t(2265);let a=e=>{let{loading:l=!0,className:t,children:a}=e;return(0,s.jsxs)("div",{className:"relative ".concat(t),children:[a,l&&(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 z-10 -translate-x-1/2 -translate-y-1/2",children:(0,s.jsx)(n.c,{})})]})}},31197:function(e,l,t){"use strict";t.d(l,{t:function(){return a}});var s=t(57437);t(2265);var n=t(88406);let a=e=>{let{total:l,page:t,size:a,onChange:r}=e;return(0,s.jsx)(n.g,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",total:l,initialPage:1,page:t,onChange:r})}},41298:function(e,l,t){"use strict";t.d(l,{K:function(){return k}});var s=t(57437),n=t(42853),a=t(24853),r=t(64903),i=t(53115),d=t(2014),c=t(45696),o=t(51240),u=t(52037),x=t(1525),h=t(95705),v=t(62478),m=t(2265),j=t(56690),f=t(39830),g=t(68638),y=t(31197),b=t(5257),p=t(19174);let N=e=>{let{value:l,onChange:t,disabled:n=!1}=e,[a,r]=(0,m.useState)([(null==l?void 0:l.toString())||"0"]);return(0,s.jsx)(b.g,{isDisabled:n,className:"w-40",selectionMode:"single",selectedKeys:a,defaultSelectedKeys:["0"],onSelectionChange:e=>{r(e);let l=Number(Array.from(e.values())[0]);null==t||t(l)},children:[{label:"不排序",value:0},{label:"价格升序",value:1},{label:"价格降序",value:2},{label:"时间升序",value:3},{label:"时间降序",value:4}].map(e=>(0,s.jsx)(p.R,{value:e.value,children:e.label},e.value))})},k=e=>{let{ticker:l,address:t}=e,{network:b}=(0,g.sD)(e=>e),[p,k]=(0,m.useState)(1),[C,S]=(0,m.useState)(10),[w,M]=(0,m.useState)(0),{data:_,isLoading:O}=(0,n.ZP)("/ordx/history-".concat(l,"-").concat(t,"-").concat(p,"-").concat(C,"-").concat(w),()=>(0,v.s1)({offset:(p-1)*C,size:C,ticker:l,address:t,sort:w}),{revalidateOnMount:!0}),P=(0,m.useMemo)(()=>{var e,l;return(null==_?void 0:null===(e=_.data)||void 0===e?void 0:e.total)?Math.ceil((null==_?void 0:null===(l=_.data)||void 0===l?void 0:l.total)/C):0},[_,C]),A=(0,m.useMemo)(()=>({1:"成交",2:"下架",3:"无效",10:"卖出",11:"买入"}),[]),D=(0,m.useMemo)(()=>{let e=[{key:"utxo",label:"Utxo",align:"center"},{key:"price",label:"Price",align:"center"},{key:"value",label:"Num",align:"center"},{key:"address",label:"From",align:"center"},{key:"txaddress",label:"To",align:"center",hideHeader:!0},{key:"txtime",label:"Time",align:"center"},{key:"txid",label:"Tx",allowsSorting:!1,align:"center"}],l=e.findIndex(e=>"txaddress"===e.key);return t&&(e.splice(l,1),e.unshift({key:"result",label:"Type",align:"center"})),e},[t]),F=(0,m.useMemo)(()=>{var e;return(null==_?void 0:null===(e=_.data)||void 0===e?void 0:e.order_list)||[]},[_]);return(0,s.jsx)("div",{className:"",children:(0,s.jsxs)(a.b,{isHeaderSticky:!0,isStriped:!0,topContent:(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(N,{disabled:!F.length,onChange:e=>{void 0!==e&&M(e)}})}),bottomContent:p>1?(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(y.t,{total:P,offset:p,size:C,onChange:(e,l)=>{k(e)}})}):null,children:[(0,s.jsx)(r.J,{columns:D,children:D.map(e=>(0,s.jsx)(i.j,{align:e.align,children:e.label},e.key))}),(0,s.jsx)(d.y,{isLoading:O,items:F,emptyContent:"No Data.",loadingContent:(0,s.jsx)(c.c,{}),children:e=>(0,s.jsx)(o.g,{children:l=>{if("utxo"===l||"txaddress"===l||"address"===l){let t=(0,u.sF)(e,l);return(0,s.jsx)(x.X,{children:t?(0,s.jsx)(h.Z,{codeString:t,className:"bg-transparent",symbol:"",size:"lg",variant:"flat",children:(0,j.NH)(t,6)}):"-"})}return"txid"===l?(0,s.jsx)(x.X,{children:(0,s.jsx)("a",{href:(0,j.a)((0,u.sF)(e,l),b),target:"_blank",children:(0,s.jsx)(f.JO,{icon:"ph:share-fill"})})}):"txtime"===l?(0,s.jsx)(x.X,{children:(0,s.jsx)("span",{children:new Date(Number((0,u.sF)(e,l))).toLocaleString()})}):"result"===l?(0,s.jsx)(x.X,{children:A[(0,u.sF)(e,l)]}):(0,s.jsx)(x.X,{children:"".concat((0,u.sF)(e,l)).concat("price"===l?" "+e.currency:"")})}},e.order_id)})]})})}}},function(e){e.O(0,[121,645,890,208,785,391,853,637,705,521,586,971,472,744],function(){return e(e.s=99502)}),_N_E=e.O()}]);