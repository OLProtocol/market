(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{99502:function(e,l,s){Promise.resolve().then(s.bind(s,96657))},96657:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return k}});var t=s(57437),n=s(39248),a=s(46802),i=s(42853),r=s(48749),d=s(13479),c=s(62478),o=s(68638),u=s(2265),x=s(31197),h=s(28034),v=s(54994),m=s(21507),j=s(89571),f=s(12765),g=s(15442);let y=e=>{var l;let{item:s,onSell:n,onCancelOrder:a}=e,[i,r]=(0,u.useState)(!1),d=async()=>{r(!0),await n(s),r(!1)};return(0,t.jsxs)(v.w,{radius:"lg",className:"border-none w-full min-h-[15rem]",children:[(0,t.jsx)(m.G,{children:(0,t.jsx)("div",{className:"flex-1",children:null==s?void 0:null===(l=s.tickers)||void 0===l?void 0:l.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["# ",e.inscriptionnum]}),(0,t.jsx)("div",{children:e.ticker}),(0,t.jsx)("div",{children:e.amount})]},e.inscriptionnum))})}),(0,t.jsx)(j.j,{}),(0,t.jsx)(f.i,{className:"",children:(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("div",{children:0===s.order_id?(0,t.jsx)(g.A,{className:"text-tiny ",variant:"flat",fullWidth:!0,color:"default",radius:"lg",onClick:d,children:"上架"}):(0,t.jsxs)(g.A,{className:"text-tiny",fullWidth:!0,variant:"flat",color:"default",radius:"lg",onClick:a,children:["下架（",s.price," ",s.currency,"）"]})})})})]})};var b=s(24033);let p=()=>{let e=(0,b.useRouter)(),{address:l}=(0,o.sD)(e=>e),{add:s,reset:n}=(0,o.JU)(e=>e),[a,v]=(0,u.useState)(1),[m,j]=(0,u.useState)(10),f=(0,u.useMemo)(()=>"/ordx/GetAddressOrdxAssets-".concat(l,"-").concat(a,"-").concat(m),[l,a,m]),{data:g,isLoading:p,mutate:N}=(0,i.ZP)(f,()=>(0,c.Ro)({address:l,offset:(a-1)*m,size:m}),{revalidateOnMount:!0}),k=async l=>{s(l),e.push("/account/sell")},C=async e=>{let s=await (0,c.sl)({address:l,order_id:e.order_id});200===s.code?(r.ZP.success({message:"Cancel order successfully",description:"The order has been canceled successfully"}),N(f)):r.ZP.error({message:"Cancel order failed",description:s.msg})},S=(0,u.useMemo)(()=>{var e,l;return(null==g?void 0:null===(e=g.data)||void 0===e?void 0:e.total)?Math.ceil((null==g?void 0:null===(l=g.data)||void 0===l?void 0:l.total)/10):0},[g]),w=(0,u.useMemo)(()=>{var e;return(null==g?void 0:null===(e=g.data)||void 0===e?void 0:e.assets)||[]},[g]);return(0,u.useEffect)(()=>{n()},[]),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)(h.V,{loading:p,children:[!w.length&&(0,t.jsx)(d.Z,{className:"mt-10"}),(0,t.jsx)("div",{className:"min-h-[30rem] grid  grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:w.map(e=>(0,t.jsx)(y,{item:e,onSell:()=>k(e),onCancelOrder:()=>C(e)},e.utxo))})]}),S>1&&(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(x.t,{total:S,offset:a,size:m,onChange:(e,l)=>{v(e)}})})]})};var N=s(41298);function k(){let{address:e}=(0,o.sD)(e=>e);return(0,t.jsx)("div",{children:(0,t.jsxs)(n.n,{"aria-label":"Options",children:[(0,t.jsx)(a.r,{title:"我的资产",children:(0,t.jsx)(p,{})},"utxo"),(0,t.jsx)(a.r,{title:"交易历史",children:(0,t.jsx)(N.K,{address:e})},"history")]})})}},28034:function(e,l,s){"use strict";s.d(l,{V:function(){return a}});var t=s(57437),n=s(45696);s(2265);let a=e=>{let{loading:l=!0,className:s,children:a}=e;return(0,t.jsxs)("div",{className:"relative ".concat(s),children:[a,l&&(0,t.jsx)("div",{className:"absolute top-1/2 left-1/2 z-10 -translate-x-1/2 -translate-y-1/2",children:(0,t.jsx)(n.c,{})})]})}},31197:function(e,l,s){"use strict";s.d(l,{t:function(){return a}});var t=s(57437);s(2265);var n=s(82335);let a=e=>{let{total:l,page:s,size:a,onChange:i}=e;return(0,t.jsx)(n.g,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",total:l,initialPage:1,page:s,onChange:i})}},41298:function(e,l,s){"use strict";s.d(l,{K:function(){return k}});var t=s(57437),n=s(42853),a=s(19970),i=s(64903),r=s(53115),d=s(2014),c=s(45696),o=s(51240),u=s(52037),x=s(1525),h=s(77883),v=s(62478),m=s(2265),j=s(56690),f=s(39830),g=s(68638),y=s(31197),b=s(68565),p=s(19174);let N=e=>{let{value:l,onChange:s,disabled:n=!1}=e,[a,i]=(0,m.useState)([(null==l?void 0:l.toString())||"0"]);return(0,t.jsx)(b.g,{isDisabled:n,className:"w-40",selectionMode:"single",selectedKeys:a,defaultSelectedKeys:["0"],onSelectionChange:e=>{i(e);let l=Number(Array.from(e.values())[0]);null==s||s(l)},children:[{label:"不排序",value:0},{label:"价格升序",value:1},{label:"价格降序",value:2},{label:"时间升序",value:3},{label:"时间降序",value:4}].map(e=>(0,t.jsx)(p.R,{value:e.value,children:e.label},e.value))})},k=e=>{let{ticker:l,address:s}=e,{network:b}=(0,g.sD)(e=>e),[p,k]=(0,m.useState)(1),[C,S]=(0,m.useState)(10),[w,M]=(0,m.useState)(0),{data:_,isLoading:O}=(0,n.ZP)("/ordx/history-".concat(l,"-").concat(s,"-").concat(p,"-").concat(C,"-").concat(w),()=>(0,v.s1)({offset:(p-1)*C,size:C,ticker:l,address:s,sort:w}),{revalidateOnMount:!0}),P=(0,m.useMemo)(()=>{var e,l;return(null==_?void 0:null===(e=_.data)||void 0===e?void 0:e.total)?Math.ceil((null==_?void 0:null===(l=_.data)||void 0===l?void 0:l.total)/C):0},[_,C]),D=(0,m.useMemo)(()=>({1:"成交",2:"下架",3:"无效",10:"卖出",11:"买入"}),[]),F=(0,m.useMemo)(()=>{let e=[{key:"utxo",label:"Utxo",align:"center"},{key:"price",label:"Price",align:"center"},{key:"value",label:"Num",align:"center"},{key:"address",label:"From",align:"center"},{key:"txaddress",label:"To",align:"center",hideHeader:!0},{key:"txtime",label:"Time",align:"center"},{key:"txid",label:"Tx",allowsSorting:!1,align:"center"}],l=e.findIndex(e=>"txaddress"===e.key);return s&&(e.splice(l,1),e.unshift({key:"result",label:"Type",align:"center"})),e},[s]),Z=(0,m.useMemo)(()=>{var e;return(null==_?void 0:null===(e=_.data)||void 0===e?void 0:e.order_list)||[]},[_]);return(0,t.jsx)("div",{className:"",children:(0,t.jsxs)(a.b,{isHeaderSticky:!0,isStriped:!0,topContent:(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(N,{disabled:!Z.length,onChange:e=>{void 0!==e&&M(e)}})}),bottomContent:p>1?(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(y.t,{total:P,offset:p,size:C,onChange:(e,l)=>{k(e)}})}):null,children:[(0,t.jsx)(i.J,{columns:F,children:F.map(e=>(0,t.jsx)(r.j,{align:e.align,children:e.label},e.key))}),(0,t.jsx)(d.y,{isLoading:O,items:Z,emptyContent:"No Data.",loadingContent:(0,t.jsx)(c.c,{}),children:e=>(0,t.jsx)(o.g,{children:l=>{if("utxo"===l||"txaddress"===l||"address"===l){let s=(0,u.sF)(e,l);return(0,t.jsx)(x.X,{children:s?(0,t.jsx)(h.Z,{codeString:s,className:"bg-transparent",symbol:"",size:"lg",variant:"flat",children:(0,j.NH)(s,6)}):"-"})}return"txid"===l?(0,t.jsx)(x.X,{children:(0,t.jsx)("a",{href:(0,j.a)((0,u.sF)(e,l),b),target:"_blank",children:(0,t.jsx)(f.JO,{icon:"ph:share-fill"})})}):"txtime"===l?(0,t.jsx)(x.X,{children:(0,t.jsx)("span",{children:new Date(Number((0,u.sF)(e,l))).toLocaleString()})}):"result"===l?(0,t.jsx)(x.X,{children:D[(0,u.sF)(e,l)]}):(0,t.jsx)(x.X,{children:"".concat((0,u.sF)(e,l)).concat("price"===l?" "+e.currency:"")})}},e.order_id)})]})})}}},function(e){e.O(0,[121,645,578,700,226,595,261,515,489,749,631,351,971,472,744],function(){return e(e.s=99502)}),_N_E=e.O()}]);