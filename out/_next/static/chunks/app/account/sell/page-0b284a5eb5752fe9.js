(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{81574:function(e,t,n){Promise.resolve().then(n.bind(n,98021))},62478:function(e,t,n){"use strict";n.d(t,{Hj:function(){return b},sl:function(){return p},jn:function(){return x},Sf:function(){return g},s1:function(){return d},AU:function(){return l},Ro:function(){return o},RK:function(){return u},eb:function(){return c},Oy:function(){return w},wt:function(){return v},xS:function(){return h},pm:function(){return f},n3:function(){return m}});var r=n(56690),a=n(87714),s=n(89860);let i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{publicKey:n,connected:i}=s.$.getState(),{signature:o}=a.E.getState(),{headers:u={},method:l="GET",data:d}=t,c="https://apitest.ordx.market".concat(e);if("GET"===l){let e=new URLSearchParams((0,r.$B)(d));c+="?".concat(e)}else"POST"===l&&(t.body=JSON.stringify(d),u["Content-Type"]="application/json");i&&o&&(u.Publickey=n,u.Signature=o),delete t.data,t.headers=u;let f=await fetch(c,t);return f},o=async e=>{let{address:t,offset:n,size:r,type:a,ticker:s}=e,o=await i("/ordx/GetAddressOrdxAssets",{data:{address:t,offset:n,size:r,type:a,ticker:s}});return o.json()},u=async e=>{let{ticker:t}=e,n=await i("/ordx/GetTickerSummary",{data:{ticker:t}});return n.json()},l=async e=>{let{ticker:t,offset:n,size:r,sort:a=0,type:s=1,address:o}=e,u=await i("/ordx/GetOrders",{data:{ticker:t,offset:n,size:r,sort:a,type:s,address:o}});return u.json()},d=async e=>{let{ticker:t,offset:n,size:r,sort:a=0,address:s}=e,o=await i("/ordx/GetHistory",{data:{ticker:t,offset:n,size:r,sort:a,address:s}});return o.json()},c=async e=>{let{interval:t=1,top_count:n=10,top_list:r="tx_amount"}=e,a=await i("/ordx/GetTopTickers",{data:{interval:t,top_count:n,top_list:r}});return a.json()},f=async e=>{let{address:t,raw:n}=e,r=await i("/ordx/SubmitOrder",{method:"POST",data:{address:t,raw:n}});return r.json()},p=async e=>{let{address:t,order_id:n}=e,r=await i("/ordx/CancelOrder",{method:"POST",data:{address:t,order_id:n}});return r.json()},h=async e=>{let{address:t,order_id:n}=e,r=await i("/ordx/LockOrder",{method:"POST",data:{address:t,order_id:n}});return r.json()},m=async e=>{let{address:t,order_id:n}=e,r=await i("/ordx/UnlockOrder",{method:"POST",data:{address:t,order_id:n}});return r.json()},b=async e=>{let{address:t,order_id:n,raw:r}=e,a=await i("/ordx/BuyOrder",{method:"POST",data:{address:t,order_id:n,raw:r}});return a.json()},v=async e=>{let{address:t,value:n=600,network:r}=e,a=await fetch("https://apitest.ordx.space/testnet/utxo/getUtxoByValue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:t,value:n})});return a.json()},x=async e=>{let t=await fetch("testnet"===e?"https://mempool.space/testnet/api/v1/fees/recommended":"https://mempool.space/api/v1/fees/recommended"),n=await t.json();return n},g=async()=>{let e=await fetch("/version.txt");return console.log("appVersion",await e.text()),e.text()},w=async(e,t)=>{let n="https://mempool.space".concat("testnet"===t?"/testnet":"","/api/tx/").concat(e,"/hex"),r=await fetch(n).then(e=>e.text()).then(e=>{if("Transaction not found"===e)throw Error("Some error happened when finding BTC to pay. Please try again later.");return e});return r}},98021:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(57437),a=n(84082),s=n(64903),i=n(53115),o=n(2014),u=n(51240),l=n(1525),d=n(21980),c=n(23310),f=n(21507),p=n(12765),h=n(25677),m=n(48749),b=n(87714),v=n(2265),x=function(e){return(e+1)%1e6};function g(e,t){return"function"==typeof e?e.length?e(t):e():e}var w=function(e){void 0===e&&(e=[]);var t=(0,v.useRef)(g(e)),n=(0,v.useReducer)(x,0)[1],r=(0,v.useMemo)(function(){var a={set:function(e){t.current=g(e,t.current),n()},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length&&r.set(function(t){return t.concat(e)})},updateAt:function(e,t){r.set(function(n){var r=n.slice();return r[e]=t,r})},insertAt:function(e,t){r.set(function(n){var r=n.slice();return e>r.length?r[e]=t:r.splice(e,0,t),r})},update:function(e,t){r.set(function(n){return n.map(function(n){return e(n,t)?t:n})})},updateFirst:function(e,n){var a=t.current.findIndex(function(t){return e(t,n)});a>=0&&r.updateAt(a,n)},upsert:function(e,n){var a=t.current.findIndex(function(t){return e(t,n)});a>=0?r.updateAt(a,n):r.push(n)},sort:function(e){r.set(function(t){return t.slice().sort(e)})},filter:function(e,t){r.set(function(n){return n.slice().filter(e,t)})},removeAt:function(e){r.set(function(t){var n=t.slice();return n.splice(e,1),n})},clear:function(){r.set([])},reset:function(){r.set(g(e).slice())}};return a.remove=a.removeAt,a},[]);return[t.current,r]},y=n(56690),j=n(89860),k=n(62478),O=n(24033);function S(){let e=(0,O.useRouter)(),{list:t,reset:n}=(0,b.J)(e=>e),{network:x,address:g}=(0,j.$)(e=>e),[S,{updateAt:P,set:A,clear:B,removeAt:N}]=w([]),C=async()=>{for(let r=0;r<t.length;r++){let a=t[r],s={...(0,y.u4)(a.utxo),value:a.value},i=await (0,y.eB)({inscriptionUtxo:s,amount:1,total:(0,y.g)(S[r]),network:x,address:g}),o=await (0,k.pm)({address:g,raw:i});200===o.code?(m.ZP.success({message:"Listed successfully",description:"The order has been submitted successfully, please wait for the buyer to buy it."}),n(),e.back()):m.ZP.error({message:"List failed",description:o.msg})}},T=(e,t)=>{P(e,Number(t))},W=(0,v.useMemo)(()=>S.reduce((e,t)=>e+t,0)||0,[S]);return(0,v.useEffect)(()=>{A(Array.from(t).fill(0))},[t,A]),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex justify-between gap-4 ",children:[(0,r.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,r.jsxs)(a.b,{"aria-label":"Example static collection table",children:[(0,r.jsxs)(s.J,{children:[(0,r.jsx)(i.j,{children:"Item"}),(0,r.jsx)(i.j,{children:"Unit Price"}),(0,r.jsx)(i.j,{children:"Amount"})]}),(0,r.jsx)(o.y,{children:t.map((e,t)=>{var n,a,s,i;return(0,r.jsxs)(u.g,{children:[(0,r.jsxs)(l.X,{children:[(0,r.jsxs)("div",{children:["Ticker：",null===(a=e.tickers)||void 0===a?void 0:null===(n=a.map(e=>" ".concat(e.ticker)))||void 0===n?void 0:n.join("-")]}),(0,r.jsxs)("div",{children:["Inscription：",null===(i=e.tickers)||void 0===i?void 0:null===(s=i.map(e=>"# ".concat(e.inscriptionnum)))||void 0===s?void 0:s.join("-")]})]}),(0,r.jsx)(l.X,{children:(0,r.jsx)(d.Y,{type:"number",placeholder:"0.00",onChange:e=>T(t,e.target.value),endContent:(0,r.jsx)("div",{className:"pointer-events-none flex items-center",children:(0,r.jsx)("span",{className:"text-default-400 text-small",children:"btc"})})})}),(0,r.jsx)(l.X,{children:"1"})]},e.utxo)})})]})}),(0,r.jsxs)(c.w,{className:"w-60",children:[(0,r.jsxs)(f.G,{children:[(0,r.jsxs)("div",{children:["Total: ",t.length]}),(0,r.jsxs)("div",{children:["Your profits: ",W," BTC"]})]}),(0,r.jsx)(p.i,{children:(0,r.jsx)(h.A,{isDisabled:W<=0,color:"primary",className:"w-full",onClick:C,children:"List"})})]})]})})}},56690:function(e,t,n){"use strict";n.d(t,{g:function(){return w},Us:function(){return c},eB:function(){return d},zU:function(){return y},NH:function(){return j},u4:function(){return x},$B:function(){return k},a:function(){return O},Ay:function(){return g}});var r=n(99301),a=n(81254),s=n(24128),i=n(89860),o=n(62478),u=n(40263).Buffer;let l=e=>{var t;let n=null===(t=s.Xf.fmt.toAsm(s.kL.toScriptPubKey(e)))||void 0===t?void 0:t[0];return n},d=async e=>{let{inscriptionUtxo:t,total:n,network:s,address:u}=e,{btcWallet:l}=i.$.getState(),d=await (0,o.Oy)(t.txid,s),c=r.YW.fromHex(d),f={hash:t.txid,index:t.vout,witnessUtxo:c.outs[t.vout],sighashType:131},p=new r._B({network:"testnet"===s?r.QW.testnet:r.QW.bitcoin});if(r.Wi(a),p.addInput(f),p.addOutput({address:u,value:n}),!l)throw Error("Wallet not initialized");let h=await l.signPsbt(p.toHex());return h},c=async e=>{let{orderRaw:t,network:n,address:s,fee:o,utxos:d,serviceFee:c,dummyUtxos:f}=e,p="tb1pttjr9292tea2nr28ca9zswgdhz0dasnz6n3v58mtg9cyf9wqr49sv8zjep",{btcWallet:h}=i.$.getState();r.Wi(a);let m="testnet"===n?r.QW.testnet:r.QW.bitcoin,b=r._B.fromHex(t,{network:m}),v=new r._B({network:m});console.log(b);let x=d.reduce((e,t)=>e+t.value,0),g=d.map(e=>({hash:e.txid,index:e.vout,witnessUtxo:{script:u.from(l(s),"hex"),value:e.value}})),w=f.reduce((e,t)=>e+t.value,0),y=f.map(e=>({hash:e.txid,index:e.vout,witnessUtxo:{script:u.from(l(s),"hex"),value:e.value},sighashType:r.YW.SIGHASH_ALL}));y.forEach(e=>{v.addInput(e)}),v.addOutput({address:s,value:w}),console.log(g);let j={hash:b.txInputs[0].hash,index:b.txInputs[0].index,witnessUtxo:b.data.inputs[0].witnessUtxo,finalScriptWitness:b.data.inputs[0].finalScriptWitness};v.addInput(j),g.forEach(e=>{v.addInput(e)});let k=b.data.inputs[0].witnessUtxo.value;v.addOutput({address:s,value:k});let O=b.txOutputs[0].value,S=b.txOutputs[0];v.addOutput(S);let P=x-(O+o)-1200;c&&p&&(P-=c,v.addOutput({address:p,value:c})),v.addOutput({address:s,value:600}),v.addOutput({address:s,value:600});let A={address:s,value:P};if(v.addOutput(A),!h)throw Error("Wallet not initialized");let B=await h.signPsbt(v.toHex()),N=r._B.fromHex(B,{network:m}),C=N.extractTransaction(),T=C.toHex();return T};var f=n(51864),p=n.n(f),h=n(90555),m=n.n(h),b=n(34098),v=n.n(b);let x=e=>{let[t,n]=e.split(":");return{txid:t,vout:parseInt(n)}},g=e=>{e>=1e8&&(e*=10);let t=String(e).padStart(8,"0").slice(0,-9)+"."+String(e).padStart(8,"0").slice(-9);return"."==t.substring(0,1)&&(t="0"+t),t},w=e=>{let[t,n]=e.toString().split(".");return n||(n="0"),1e8*parseInt(t)+parseInt(n.padEnd(8,"0"))},y=function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=p()(e,"value"),a=v()(r);n&&m()(a);let s=[],i=0;for(let e=0;e<a.length;e++){let n=a[e];if(s.push(n),(i+=n.value)>=t)break}let o=r.slice(0,2),u=[];for(let e=0;e<o.length;e++)s.some(t=>t.txid===o[e].txid)||u.push(o[e]);return{minUtxo:r[0],maxUtxo:r[r.length-1],utxos:s,smallTwoUtxos:u,total:i}},j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*****";return"string"==typeof e&&e?"".concat(null==e?void 0:e.substring(0,t)).concat(n).concat(null==e?void 0:e.substring((null==e?void 0:e.length)-t)):""},k=e=>{let t={...e};return Object.keys(t).forEach(e=>{(""===t[e]||void 0===t[e]||null===t[e]||"null"===t[e]||"undefined"===t[e]||"NaN"===t[e]||isNaN(t[e])&&"number"==typeof t[e])&&delete t[e]}),t},O=(e,t)=>"testnet"===t?"https://mempool.space/testnet/tx/".concat(e):"https://mempool.space/tx/".concat(e)},87714:function(e,t,n){"use strict";n.d(t,{E:function(){return i},J:function(){return s}});var r=n(94660),a=n(74810);let s=(0,r.Ue)()((0,a.mW)(e=>({list:[],add:t=>{e(e=>({list:[...e.list,t]}))},reset:()=>{e({list:[]})}}))),i=(0,r.Ue)()((0,a.mW)((0,a.tJ)(e=>({feeRate:{value:1,type:"custom"},appVersion:0,signature:"",setSignature:t=>{e({signature:t})},setFeeRate:t=>{e({feeRate:t})},reset:()=>{e({feeRate:{value:1,type:"custom"},appVersion:0})}}),{name:"common-store",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return["signature"].includes(t)}))})))},21507:function(e,t,n){"use strict";n.d(t,{G:function(){return l}});var r=n(5817),a=n(34480),s=n(25312),i=n(59762),o=n(57437),u=(0,a.Gp)((e,t)=>{var n;let{as:a,className:u,children:l,...d}=e,c=(0,s.gy)(t),{slots:f,classNames:p}=(0,r.R)(),h=(0,i.W)(null==p?void 0:p.body,u);return(0,o.jsx)(a||"div",{ref:c,className:null==(n=f.body)?void 0:n.call(f,{class:h}),...d,children:l})});u.displayName="NextUI.CardBody";var l=u},23310:function(e,t,n){"use strict";n.d(t,{w:function(){return y}});var r=n(5817),a=n(56926),s=n(45506),i=(0,a.tv)({slots:{base:["flex","flex-col","relative","overflow-hidden","height-auto","outline-none","text-foreground","box-border","bg-content1",...s.Dh],header:["flex","p-3","z-10","w-full","justify-start","items-center","shrink-0","overflow-inherit","color-inherit","subpixel-antialiased"],body:["relative","flex","flex-1","w-full","p-3","flex-auto","flex-col","place-content-inherit","align-items-inherit","h-auto","break-words","text-left","overflow-y-auto","subpixel-antialiased"],footer:["p-3","h-auto","flex","w-full","items-center","overflow-hidden","color-inherit","subpixel-antialiased"]},variants:{shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},radius:{none:{base:"rounded-none",header:"rounded-none",footer:"rounded-none"},sm:{base:"rounded-small",header:"rounded-t-small",footer:"rounded-b-small"},md:{base:"rounded-medium",header:"rounded-t-medium",footer:"rounded-b-medium"},lg:{base:"rounded-large",header:"rounded-t-large",footer:"rounded-b-large"}},fullWidth:{true:{base:"w-full"}},isHoverable:{true:{base:"data-[hover=true]:bg-content2 dark:data-[hover=true]:bg-content2"}},isPressable:{true:{base:"cursor-pointer"}},isBlurred:{true:{base:["bg-background/80","dark:bg-background/20","backdrop-blur-md","backdrop-saturate-150"]}},isFooterBlurred:{true:{footer:["bg-background/10","backdrop-blur","backdrop-saturate-150"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:"",false:{base:"transition-transform-background motion-reduce:transition-none"}}},compoundVariants:[{isPressable:!0,disableAnimation:!1,class:"data-[pressed=true]:scale-[0.97] tap-highlight-transparent"}],defaultVariants:{radius:"lg",shadow:"md",fullWidth:!1,isHoverable:!1,isPressable:!1,isDisabled:!1,disableAnimation:!1,isFooterBlurred:!1}}),o=n(2265),u=n(12650),l=n(26565),d=n(21619),c=n(2835),f=n(34480),p=n(59762),h=n(48794),m=n(19815),b=n(25312),v=n(81533),x=n(53702),g=n(57437),w=(0,f.Gp)((e,t)=>{let{children:n,context:a,Component:s,isPressable:w,disableAnimation:y,disableRipple:j,getCardProps:k,getRippleProps:O}=function(e){let[t,n]=(0,f.oe)(e,i.variantKeys),{ref:r,as:a,children:s,disableRipple:x=!1,onClick:g,onPress:w,autoFocus:y,className:j,classNames:k,allowTextSelectionOnPress:O=!0,...S}=t,P=(0,b.gy)(r),A=a||(e.isPressable?"button":"div"),B="string"==typeof A,N=(0,p.W)(null==k?void 0:k.base,j),{onClick:C,onClear:T,ripples:W}=(0,v.i)(),U=t=>{e.disableAnimation||x||!P.current||C(t)},{buttonProps:I,isPressed:H}=(0,c.j)({onPress:w,elementType:a,isDisabled:!e.isPressable,onClick:(0,u.tS)(g,U),allowTextSelectionOnPress:O,...S},P),{hoverProps:E,isHovered:G}=(0,d.XI)({isDisabled:!e.isHoverable,...S}),{isFocusVisible:z,isFocused:R,focusProps:_}=(0,l.Fx)({autoFocus:y}),D=(0,o.useMemo)(()=>i({...n}),[...Object.values(n)]),F=(0,o.useMemo)(()=>({isDisabled:e.isDisabled,isFooterBlurred:e.isFooterBlurred,disableAnimation:e.disableAnimation,fullWidth:e.fullWidth,slots:D,classNames:k}),[D,k,e.isDisabled,e.isFooterBlurred,e.disableAnimation,e.fullWidth]),L=(0,o.useCallback)((t={})=>({ref:P,className:D.base({class:N}),tabIndex:e.isPressable?0:-1,"data-hover":(0,h.PB)(G),"data-pressed":(0,h.PB)(H),"data-focus":(0,h.PB)(R),"data-focus-visible":(0,h.PB)(z),"data-disabled":(0,h.PB)(e.isDisabled),...(0,u.dG)(e.isPressable?{...I,..._,role:"button"}:{},e.isHoverable?E:{},(0,m.z)(S,{enabled:B}),(0,m.z)(t))}),[P,D,N,B,e.isPressable,e.isHoverable,e.isDisabled,G,H,z,I,_,E,S]),J=(0,o.useCallback)(()=>({ripples:W,onClear:T}),[W,T]);return{context:F,domRef:P,Component:A,classNames:k,children:s,isHovered:G,isPressed:H,isPressable:e.isPressable,isHoverable:e.isHoverable,disableAnimation:e.disableAnimation,disableRipple:x,handleClick:U,isFocusVisible:z,getCardProps:L,getRippleProps:J}}({...e,ref:t});return(0,g.jsxs)(s,{...k(),children:[(0,g.jsx)(r.k,{value:a,children:n}),w&&!y&&!j&&(0,g.jsx)(x.L,{...O()})]})});w.displayName="NextUI.Card";var y=w},12765:function(e,t,n){"use strict";n.d(t,{i:function(){return l}});var r=n(5817),a=n(34480),s=n(25312),i=n(59762),o=n(57437),u=(0,a.Gp)((e,t)=>{var n;let{as:a,className:u,children:l,...d}=e,c=(0,s.gy)(t),{slots:f,classNames:p}=(0,r.R)(),h=(0,i.W)(null==p?void 0:p.footer,u);return(0,o.jsx)(a||"div",{ref:c,className:null==(n=f.footer)?void 0:n.call(f,{class:h}),...d,children:l})});u.displayName="NextUI.CardFooter";var l=u},5817:function(e,t,n){"use strict";n.d(t,{R:function(){return a},k:function(){return r}});var[r,a]=(0,n(23024).k)({name:"CardContext",strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"})},28305:function(e,t,n){"use strict";n.d(t,{f:function(){return a}});var r=n(57437),a=e=>(0,r.jsx)("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:(0,r.jsx)("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})})}},function(e){e.O(0,[121,645,551,677,920,257,328,980,971,472,744],function(){return e(e.s=81574)}),_N_E=e.O()}]);