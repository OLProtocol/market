(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6372],{48157:function(e,i,t){Promise.resolve().then(t.bind(t,54746))},54746:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return m}});var s=t(57437),a=t(12786),l=t(87586),r=t(2265),n=t(18182),d=t(1271),o=t(16463),c=t(60275),u=t(90089);function m(){let e=(0,o.useSearchParams)(),{i18n:i,t}=(0,u.$G)(),m=e.get("id")||1,{address:v}=(0,c.$)(),[f,w]=(0,r.useState)(!1),[h,_]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[y,g]=(0,r.useState)(!1),[j,p]=(0,r.useState)({}),[N,k]=(0,r.useState)({}),z=(0,r.useMemo)(()=>"en"===i.language?[{activity_id:1,title:"\uD83D\uDD25 Earn $RarePizza airdrop at zero cost!",time:"2024/9/30 ~ 2024/10/6",desc:"Complete the task to earn a 100 $RarePizza airdrop!",twitter_id:"sat20market",tweet_id:"1838568142236455423"}]:[{activity_id:1,title:"\uD83D\uDD25 零成本赢取$RarePizza空投！",time:"2024/10/1 ~ 2024/10/7",desc:"完成任务赢取100 $RarePizza空投",twitter_id:"sat20market",tweet_id:"1838568142236455423"}],[i.language]),P=(0,r.useMemo)(()=>z.find(e=>e.activity_id==m),[m,z]),D=async()=>{let[e,i]=await (0,n.vU)(l.tg)({address:v});200===i.code&&(location.href=i.data.authorization_url)},S=async()=>{w(!0),k(!1);let[e,i]=await (0,n.vU)(l.yr)({address:v});if(w(!1),e){console.error(e);return}if(200===i.code){var t;k((null===(t=i.data)||void 0===t?void 0:t.twitter)||{})}},U=async()=>{w(!0),p({});let[e,i]=await (0,n.vU)(l.F_)({address:v,activity_id:null==P?void 0:P.activity_id});w(!1),e&&console.error(e),200===i.code&&p(i.data)};(0,r.useEffect)(()=>{v&&(S(),U())},[v]);let C=async()=>{window.open("https://twitter.com/intent/follow?screen_name=".concat(null==P?void 0:P.twitter_id),"_blank");let[e,i]=await (0,n.vU)(l.UK)({address:v,activity_name:"following",result:1,activity_id:null==P?void 0:P.activity_id});if(e){console.error(e);return}200===i.code&&p({...j,following:1})},R=async()=>{window.open("https://twitter.com/intent/retweet?tweet_id=".concat(null==P?void 0:P.tweet_id),"_blank");let[e,i]=await (0,n.vU)(l.UK)({address:v,activity_name:"retweets",activity_id:null==P?void 0:P.activity_id,result:1});if(e){console.error(e);return}200===i.code&&p({...j,retweets:1})},$=async()=>{window.open("https://twitter.com/intent/like?tweet_id=${currentData?.tweet_id}","_blank");let[e,i]=await (0,n.vU)(l.UK)({address:v,activity_name:"flowers",activity_id:null==P?void 0:P.activity_id,result:1});if(e){console.error(e);return}200===i.code&&p({...j,flowers:1})},A=async()=>{let[e,i]=await (0,n.vU)(l.F_)({address:v,activity_id:null==P?void 0:P.activity_id});w(!1);let s=(null==i?void 0:i.following)==1&&(null==i?void 0:i.retweets)==1&&(null==i?void 0:i.flowers)==1;e||(null==i?void 0:i.code)!==200||!s?d.ZP.error({message:t("pages.event.totast.error")}):d.ZP.success({message:t("pages.event.totast.success")})};return(0,s.jsxs)("div",{className:"container mx-auto p-4 max-w-6xl",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:null==P?void 0:P.title}),(0,s.jsx)("p",{className:"text-sm",children:null==P?void 0:P.time})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"完成Web3 任务"}),(0,s.jsx)("div",{className:"border border-gray-700 rounded-lg p-4",children:null==P?void 0:P.desc})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold mb-4 flex justify-between items-center",children:[(0,s.jsx)("span",{children:"完成 X 社媒任务"}),(0,s.jsx)(a.A,{size:"sm",color:"default",radius:"full",isLoading:f,isDisabled:null==N?void 0:N.id,onClick:D,children:(null==N?void 0:N.id)?"已绑定 ".concat(N.name):"绑定 X"})]}),(0,s.jsxs)("div",{className:"mb-4 border border-gray-700 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"mb-4",children:["关注 @",null==P?void 0:P.twitter_id," 的 X 账号"]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)(a.A,{onClick:C,size:"sm",isLoading:f||h,isDisabled:1===j.following||!(null==N?void 0:N.id),color:"default",radius:"full",children:"关注"})})]}),(0,s.jsxs)("div",{className:"mb-4 border border-gray-700 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"mb-4",children:["转发 @",null==P?void 0:P.twitter_id," 的推文"]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)(a.A,{onClick:R,size:"sm",color:"default",isLoading:f||x,isDisabled:1===j.retweets||!(null==N?void 0:N.id),radius:"full",children:"转发"})})]}),(0,s.jsxs)("div",{className:"mb-4 border border-gray-700 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"mb-4",children:["点赞 @",null==P?void 0:P.twitter_id," 的推文"]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)(a.A,{onClick:$,size:"sm",color:"default",isLoading:f||y,isDisabled:1===j.flowers||!(null==N?void 0:N.id),radius:"full",children:"点赞"})})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(a.A,{size:"md",color:"primary",radius:"full",onClick:A,children:"验证抽奖资格"})})]})]})}},16463:function(e,i,t){"use strict";var s=t(71169);t.o(s,"usePathname")&&t.d(i,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(i,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(i,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[3121,1866,1645,8218,3454,9190,1271,275,7923,2971,7023,1744],function(){return e(e.s=48157)}),_N_E=e.O()}]);